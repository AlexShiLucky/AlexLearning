/*
********************************************************************************
* car.c
*
*   Author: AlexShi <shiweining123@gmail.com>
*
********************************************************************************
*/

/*
********************************************************************************
* Included Files
********************************************************************************
*/

#include "common.h"
#include "car.h"

/*
********************************************************************************
* Pre-processor Definitions
********************************************************************************
*/



/*
********************************************************************************
* Shared Types
********************************************************************************
*/



/*
********************************************************************************
* Private Types
********************************************************************************
*/



/*
********************************************************************************
* Private Function Prototypes
********************************************************************************
*/

static void car_move(moveable_t const * const super);

/*
********************************************************************************
* Shared Data
********************************************************************************
*/



/*
********************************************************************************
* Private Data
********************************************************************************
*/



/*
********************************************************************************
* Private Functions
********************************************************************************
*/

/*
 * @brief 汽车移动的行为
 *
 * @param
 *
 * @return 无
 *
 * @notes
 */
static void car_move(moveable_t const * const super)
{
    car_t *self = container_of(super, car_t, moveable);

    printf("汽车[%s]在开动! \n", self->name);
}

/*
********************************************************************************
* Public Functions
********************************************************************************
*/

/*
 * @brief 创建汽车
 *
 * @param name - 汽车名称
 *
 * @return 汽车句柄
 *
 * @notes
 */
car_t* car_create(const char *name)
{
    car_t *self = NULL;

    self = (car_t *)malloc(sizeof(car_t));
    if (!self) {
        printf("It's not enough memory.\n");
        return NULL;
    }
    self->name = name;
    self->moveable.move = &car_move;

    printf("Create %s OK.\n", self->name);

    return self;
}

/*
 * @brief 销毁汽车
 *
 * @param
 *
 * @return 无
 *
 * @notes
 */
void car_distory(car_t * const self)
{
    printf("Distory %s\n", self->name);
    free(self);    /* 释放子类数据 */
}


/*
********************************************************************************
* No More!
********************************************************************************
*/
