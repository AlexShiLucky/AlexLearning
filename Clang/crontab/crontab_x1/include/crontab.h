/*
********************************************************************************
* crontab.h
*
*   Author: AlexShi <shiweining123@gmail.com>
*
********************************************************************************
*/

#ifndef __CRONTAB_H
#define __CRONTAB_H

/*
********************************************************************************
* Included Files
********************************************************************************
*/

#include "common.h"

/*
********************************************************************************
* Pre-processor Definitions
********************************************************************************
*/



/*
********************************************************************************
* Shared Types
********************************************************************************
*/



/*
********************************************************************************
* Public Types
********************************************************************************
*/

/*
# .——————————— minute (0 - 59)
# | .————————— hour (0 - 23)
# | | .——————— day of month (1 - 31)
# | | | .————— month (1 - 12) OR jan，feb，mar，apr……
# | | | | .——— day of week(0-6)(Sunday=0 or 7)OR sun，mon，tue，wed，thu，fri，sat
# | | | | |
# * * * * *    user-name command to be executed
*/

typedef struct _cronent_desc {
    CPU_INT64U min;  // Minutes repeat - bits 0-59
    CPU_INT32U hour; // Hours repeat - bits 0-23
    CPU_INT32U dom;  // Day-of-month repeat - bits 0-30
    CPU_INT16U mon;  // Monthly repeat - bits 0-11
    CPU_INT08U dow;  // Day-of-week repeat - bits 0-6
    struct _cronent_desc *next;
} cronent_desc_t;

/*
********************************************************************************
* Inline Functions
********************************************************************************
*/



/*
********************************************************************************
* Shared Data
********************************************************************************
*/



/*
********************************************************************************
* Public Data
********************************************************************************
*/



/*
********************************************************************************
* Public Function Prototypes
********************************************************************************
*/

#ifdef __cplusplus
#define EXTERN extern "C"
extern "C" {
#else
#define EXTERN extern
#endif

EXTERN CPU_INT64U cron_parsepart(char *str, char **end, CPU_INT08U min, CPU_INT08U max);
EXTERN int cron_parsedesc(char *str, cronent_desc_t *desc);

#undef EXTERN
#ifdef __cplusplus
}
#endif

#endif      /* __CRONTAB_H */

/*
********************************************************************************
* No More!
********************************************************************************
*/
